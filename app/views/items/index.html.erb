<% if current_user.type == "Customer" %>
  <h1>Cart</h1>
  <div id="cart-table">
    <table class="table">
      <thead>
        <tr>
          <th scope="col">Image</th>
          <th scope="col">Name</th>
          <th scope="col">Price</th>
          <th scope="col">Quantity</th>
          <th scope="col">Total Price</th>
          <th scope="col">Action</th>
        </tr>
      </thead>
      <tbody id="cart-items-body">
        <!-- Cart items will be dynamically added here -->
      </tbody>
    </table>
    <h4>Total: <span id="total-price">0</span></h4>
  </div>
<% end %>

<table class="table">
  <thead>
    <tr>
      <th scope="col">Image</th>
      <th scope="col">Name</th>
      <th scope="col">Price</th>
      <th scope="col">Category</th>
      <th scope="col">Action</th>
    </tr>
  </thead>
  <tbody>
    <% @items.each do |item| %>
      <tr>
        <td>
          <% if item.image.attached? %>
            <%= image_tag url_for(item.image), height: "50px", width: "50px" %>
          <% else %>
            No image
          <% end %>
        </td>
        <td><%= item.name %></td>
        <td><%= item.price %></td>
        <td><%= item.category&.name || "No Category" %></td> 
        <td>
          <button class="btn btn-primary add-to-cart" data-item-id="<%= item.id %>" data-item-name="<%= item.name %>" data-item-price="<%= item.price %>">Add to Cart</button>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
<%= javascript_include_tag 'cart' %>
